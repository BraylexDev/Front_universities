<div class="card border-0 shadow-sm">
  <div class="card-header bg-secondary bg-gradient text-white">
    <h4 class="mb-0">
      <i class="pi pi-person-gear me-2"></i>Personal Information
    </h4>
  </div>
  <div class="card-body p-4">
    <form [formGroup]="profileForm" (ngSubmit)="onSaveProfile()">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="name" class="form-label fw-semibold">
            <i class="pi pi-person-badge me-2"></i>Full Name
          </label>
          <input
            type="text"
            class="form-control form-control-lg"
            [class.is-invalid]="isFieldInvalid('name')"
            id="name"
            formControlName="name"
            placeholder="Your full name"
          />
          <div class="invalid-feedback" *ngIf="isFieldInvalid('name')">
            Name is required
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label for="userName" class="form-label fw-semibold">
            <i class="pi pi-at me-2"></i>User
          </label>
          <input
            type="text"
            class="form-control form-control-lg"
            [class.is-invalid]="isFieldInvalid('userName')"
            id="userName"
            formControlName="userName"
            placeholder="User name"
          />
          <div class="invalid-feedback" *ngIf="isFieldInvalid('userName')">
            User is required
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label for="email" class="form-label fw-semibold">
            <i class="pi pi-envelope me-2"></i>Email
          </label>
          <input
            type="email"
            class="form-control form-control-lg"
            [class.is-invalid]="isFieldInvalid('email')"
            id="email"
            formControlName="email"
            placeholder="tu@email.com"
          />
          <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
            Valid email is required
          </div>
        </div>
      </div>

      <hr class="my-4" />

      <h5 class="text-secondary mb-3">
        <i class="pi pi-key me-2"></i>Change Password (Optional)
      </h5>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="newPassword" class="form-label">New Password</label>
          <div class="input-group">
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control form-control-lg"
              [class.is-invalid]="isFieldInvalid('password')"
              id="newPassword"
              formControlName="newPassword"
              placeholder="New Password"
            />
            <button
              class="btn btn-outline-secondary"
              type="button"
              (click)="togglePassword()"
            >
              <i [class]="showPassword ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
            </button>
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label for="confirmPassword" class="form-label"
            >Confirm Password</label
          >
          <input
            type="password"
            class="form-control form-control-lg"
            [class.is-invalid]="passwordMismatch"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirm new password"
          />
          <div class="invalid-feedback" *ngIf="passwordMismatch">
            Passwords do not match
          </div>
        </div>
      </div>

      <!-- Success Message -->
      <div class="alert alert-success" *ngIf="successMessage">
        <i class="pi pi-check-circle-fill me-2"></i>
        {{ successMessage }}
      </div>

      <!-- Error Message -->
      <div class="alert alert-danger" *ngIf="errorMessage">
        <i class="pi pi-exclamation-triangle-fill me-2"></i>
        {{ errorMessage }}
      </div>

      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <button
          type="button"
          class="btn btn-outline-secondary btn-lg me-md-2"
          (click)="resetForm()"
        >
          <i class="pi pi-arrow-clockwise me-2"></i>Restore
        </button>
        <button
          type="submit"
          class="btn btn-primary btn-lg"
          [disabled]="isLoading || profileForm.invalid"
        >
          <span
            *ngIf="isLoading"
            class="spinner-border spinner-border-sm me-2"
          ></span>
          <i *ngIf="!isLoading" class="pi pi-save me-2"></i>
          {{ isLoading ? "Saving..." : "Save Changes" }}
        </button>
      </div>
    </form>
  </div>
</div>
